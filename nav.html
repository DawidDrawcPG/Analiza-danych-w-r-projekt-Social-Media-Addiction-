<div class="topnav">
  <div class="topnav-inner">
    <div class="brand">
      <a href="#cel" class="logo-link" aria-label="Przejdź do początku raportu">
        <img src="logo_pg_wzie.png" alt="Logo PG WZiE" />
      </a>
      <div class="brand-text">
        <div class="brand-line1">Politechnika Gdańska</div>
        <div class="brand-line2">Wydział Zarządzania i Ekonomii</div>
      </div>
    </div>

    <nav class="menu" aria-label="Menu raportu">
      <a href="#cel">Cel</a>

      <div class="dropdown">
        <a class="dropbtn" href="#opis" aria-haspopup="true" aria-expanded="false">Dane</a>
        <div class="dropdown-content" role="menu" aria-label="Dane">
          <a href="#opis">1. Wstęp i opis</a>
          <a href="#podglad">1.1 Podgląd danych</a>
        </div>
      </div>

      <div class="dropdown">
        <a class="dropbtn" href="#czyszczenie" aria-haspopup="true" aria-expanded="false">Czyszczenie</a>
        <div class="dropdown-content" role="menu" aria-label="Czyszczenie">
          <a href="#czyszczenie">2. Czyszczenie danych</a>
        </div>
      </div>

      <div class="dropdown">
        <a class="dropbtn" href="#statystyki" aria-haspopup="true" aria-expanded="false">Opis</a>
           <div class="dropdown-content" role="menu" aria-label="Opis">
             <a href="#statystyki">3. Statystyki opisowe</a>
            <a href="#korelacje">4. Korelacje</a>
            <a href="#korelacje_czas">4.1 Czas w SM vs reszta</a>
            <a href="#korelacje_lollipop">4.2 Wizualizacja (lollipop)</a>
            <a href="#korelacje_top10">4.3 TOP 10 korelacji</a>
          </div>

      </div>

      <div class="dropdown">
        <a class="dropbtn" href="#wykresy" aria-haspopup="true" aria-expanded="false">Wykresy</a>
        <div class="dropdown-content scroll-y" role="menu" aria-label="Wykresy">
          <a href="#wykresy">5. Wykresy</a>
          <a href="#wykres_addicted">5.1 Czas vs uzależnienie</a>
          <a href="#wykres_sen">5.2 Czas vs sen</a>
          <a href="#wykres_mh">5.3 Czas vs zdrowie psychiczne</a>
          <a href="#wykres_konflikty">5.4 Czas vs konflikty</a>
          <a href="#png_platformy">5.5 Struktura wyboru platform</a>
          <a href="#png_hist_uzycie">5.6 Rozkład czasu korzystania z social mediów</a>
          <a href="#png_usage_vs_addicted">5.7 Czas w social mediach a poziom uzależnienia</a>
          <a href="#png_sleep_vs_addicted">5.8 Sen a poziom uzależnienia</a>
          <a href="#png_box_yesno_usage">5.9 Czas w social mediach w grupach „Yes/No”</a>
          <a href="#png_hist_addicted">5.10 Rozkład wskaźnika uzależnienia</a>
          <a href="#png_box_yesno_addicted">5.11 Uzależnienie w grupach „Yes/No”</a>
          <a href="#png_box_platform_addicted">5.12 Uzależnienie a najczęściej używana platforma</a>
          <a href="#png_age_vs_addicted">5.13 Wiek a uzależnienie</a>
          <a href="#png_lm_resid_fitted">5.14 Diagnostyka modelu liniowego: reszty vs dopasowanie</a>
          <a href="#png_lm_qq">5.15 Diagnostyka modelu liniowego: wykres Q–Q</a>
          <a href="#png_corrplot">5.16 Korelacje między zmiennymi (corrplot)</a>
          <a href="#png_roc_logit">5.17 Krzywa ROC dla modelu logistycznego</a>
        </div>
      </div>

      <div class="dropdown">
        <a class="dropbtn" href="#ttest" aria-haspopup="true" aria-expanded="false">Testy</a>
        <div class="dropdown-content" role="menu" aria-label="Testy">
          <a href="#ttest">6. Test t-Studenta</a>
          <a href="#srednie_yesno">6.1 Średnie Yes/No</a>
          <a href="#nieparam">6.2 Wilcoxon + Cohen d</a>
          <a href="#chi2">6.3 Chi^2 + V Cramera</a>
          <a href="#kruskal">6.4 Kruskal-Wallis</a>
        </div>
      </div>

      <div class="dropdown">
        <a class="dropbtn" href="#modele" aria-haspopup="true" aria-expanded="false">Modele</a>
        <div class="dropdown-content" role="menu" aria-label="Modele">
          <a href="#lm">7.1 Model liniowy</a>
          <a href="#logit">7.2 Model logistyczny</a>
        </div>
      </div>

      <div class="dropdown dropdown-right">
        <a class="dropbtn" href="#wnioski" aria-haspopup="true" aria-expanded="false">Wnioski</a>
        <div class="dropdown-content" role="menu" aria-label="Wnioski">
          <a href="#wnioski">8. Wnioski</a>
          <a href="#ograniczenia">9. Ograniczenia</a>
          <a href="#rekomendacje">9.1 Rekomendacje</a>
          <a href="#sesja">10. Info o sesji</a>
        </div>
      </div>
    </nav>
  </div>
</div>

<!-- kotwica: "Cel" i klik w logo przewijają na początek raportu -->
<div id="cel" class="anchor-top"></div>

<script>
(() => {
  // ===== dropdown (hover + focus) =====
  const dropdowns = document.querySelectorAll('.menu .dropdown');
  dropdowns.forEach(dd => {
    let timer = null;
    const btn = dd.querySelector('.dropbtn');

    const open = () => {
      if (timer) clearTimeout(timer);
      dd.classList.add('open');
      if (btn) btn.setAttribute('aria-expanded', 'true');
    };

    const close = () => {
      if (timer) clearTimeout(timer);
      timer = setTimeout(() => {
        dd.classList.remove('open');
        if (btn) btn.setAttribute('aria-expanded', 'false');
      }, 220);
    };

    dd.addEventListener('mouseenter', open);
    dd.addEventListener('mouseleave', close);
    dd.addEventListener('focusin', open);
    dd.addEventListener('focusout', close);
  });

  // ===== scroll z "odjazdem" na belkę =====
  const nav = document.querySelector('.topnav');
  const getOffset = () => (nav ? nav.offsetHeight : 0) + 18;

  document.querySelectorAll('.menu a[href^="#"], .logo-link[href^="#"]').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (!href || href === '#') return;

      const id = href.slice(1);
      const target = document.getElementById(id);
      if (!target) return;

      e.preventDefault();

      const head = target.matches('h1,h2,h3,h4,h5,h6')
        ? target
        : (target.querySelector('h1,h2,h3,h4,h5,h6') || target);

      const top = head.getBoundingClientRect().top + window.pageYOffset - getOffset();
      window.history.pushState(null, '', href);
      window.scrollTo({ top, behavior: 'smooth' });

      const dd = link.closest('.dropdown');
      if (dd) dd.classList.remove('open');
    });
  });
})();
</script>

